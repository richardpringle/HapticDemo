<!doctype html>
<html>
  
  <head>
    <title>app</title>
    <style type="text/css">
      html, body, canvas {
        height: 100%;
        width: 100%;
        margin: 0;
      }

      #viewport {
        position: relative;
        height: 100%;
        background: #1d1f20;
      }

    </style>
    <script src="/js/socket.io-1.2.0.js"></script>
    <script src="/js/jquery-1.11.1.js"></script>
    <script src="/js/paper-full.js"></script>
    <script type="text/paperscript" canvas="myCanvas">
      var socket = io();

      function map(x, inMin, inMax, outMin, outMax) {
        return (x - inMin) * (outMax - outMin) / (inMax - inMin) + outMin;
      }

      var topLeft = new Shape.Circle({
        center: new Point(0,0),
        radius: 30,
        strokeColor: 'red',
        fillColor: 'red'
      });
      var topRight = new Shape.Circle({
        center: new Point(view.bounds.width, 0),
        radius: 30,
        strokeColor: 'red',
        fillColor: 'red'
      });
      var bottomLeft = new Shape.Circle({
        center: new Point(0,view.bounds.height),
        radius: 30,
        strokeColor: 'red',
        fillColor: 'red'
      });
      var bottomRight = new Shape.Circle({
        center:new Point(view.bounds.width,view.bounds.height),
        radius: 30,
        strokeColor: 'red',
        fillColor: 'red'
      });

      var user = new Shape.Circle({
        center: view.center,
        radius: 30,
        strokeColor: 'DarkGoldenRod',
        strokeWidth: 20
      });

      socket.on('state', function (state) {
        // BACKWARDS!!!!!!!
        var y = map(state[0], -95, 95, 0, 1024);
        var x = map(state[1], 87, 315, 0, 768);
        user.position = new Point(x,y);
        view.draw();
      });


    </script>
  </head>
  
  <body>

    <div id="viewport">
      <canvas id="myCanvas" resize="true"></canvas>
    </div>

  </body>

</html>

